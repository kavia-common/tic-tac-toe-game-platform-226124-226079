{"is_source_file": true, "format": "Python", "description": "This file manages database setup and session handling for a Tic-Tac-Toe game platform backend. It includes functions to resolve database path from environment variables, create and cache an SQLModel engine, initialize the database, and generate sessions with proper transaction handling.", "external_files": ["sqlmodel", "dotenv", "src/db/models"], "external_methods": ["load_dotenv", "create_engine", "SQLModel.metadata.create_all", "Session"], "published": ["get_engine", "init_db", "session_scope", "get_session"], "classes": [], "methods": [{"name": "str _resolve_db_path()", "description": "Resolves the database file path from environment variables or defaults to ./tictactoe.db.", "scope": "", "scopeKind": ""}, {"name": "get_engine(echo: bool = False)", "description": "Creates and caches a SQLModel engine connected to the SQLite database.", "scope": "", "scopeKind": ""}, {"name": "None init_db(echo: bool = False)", "description": "Initializes the database by creating all registered tables.", "scope": "", "scopeKind": ""}, {"name": "Generator[Session,None,None] session_scope()", "description": "Provides a transactional scope for database operations, handling commit and rollback.", "scope": "", "scopeKind": ""}, {"name": "Generator[Session,None,None] get_session()", "description": "Provides a database session for dependency injection, using the session scope.", "scope": "", "scopeKind": ""}], "calls": ["load_dotenv", "os.getenv", "os.path.expanduser", "os.makedirs", "create_engine", "SQLModel.metadata.create_all", "Session"], "search-terms": ["database.py", "SQLModel engine", "session management", "SQLite database", "environment variable database path", "create_engine", "init_db", "session_scope", "get_session"], "state": 2, "file_id": 5, "knowledge_revision": 14, "git_revision": "b64e534c2c8b25cb144fdb3583928630ead52613", "ctags": [{"_type": "tag", "name": "DB_PATH", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-226124-226079/tic_tac_toe_backend/src/db/database.py", "pattern": "/^DB_PATH = _resolve_db_path()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "_ENGINE", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-226124-226079/tic_tac_toe_backend/src/db/database.py", "pattern": "/^_ENGINE = None$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "_resolve_db_path", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-226124-226079/tic_tac_toe_backend/src/db/database.py", "pattern": "/^def _resolve_db_path() -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "get_engine", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-226124-226079/tic_tac_toe_backend/src/db/database.py", "pattern": "/^def get_engine(echo: bool = False):$/", "language": "Python", "kind": "function", "signature": "(echo: bool = False)"}, {"_type": "tag", "name": "get_session", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-226124-226079/tic_tac_toe_backend/src/db/database.py", "pattern": "/^def get_session() -> Generator[Session, None, None]:$/", "language": "Python", "typeref": "typename:Generator[Session,None,None]", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "init_db", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-226124-226079/tic_tac_toe_backend/src/db/database.py", "pattern": "/^def init_db(echo: bool = False) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "(echo: bool = False)"}, {"_type": "tag", "name": "session_scope", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-226124-226079/tic_tac_toe_backend/src/db/database.py", "pattern": "/^def session_scope() -> Generator[Session, None, None]:$/", "language": "Python", "typeref": "typename:Generator[Session,None,None]", "kind": "function", "signature": "()"}], "hash": "c704909a860925d3559c046614fbcbd8", "format-version": 4, "code-base-name": "tic_tac_toe_backend", "filename": "tic_tac_toe_backend/src/db/database.py", "fields": [{"name": "DB_PATH = _resolve_db_path()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "_ENGINE = None", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"14": "b64e534c2c8b25cb144fdb3583928630ead52613"}]}