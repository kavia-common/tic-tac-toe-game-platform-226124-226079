{"is_source_file": true, "format": "Python", "description": "This file provides utility functions and core game logic for a tic-tac-toe backend API, including board conversion, winner detection, game state updates, and move application.", "external_files": ["src/db/models", "src/db/repositories"], "external_methods": ["GameRepository.create", "GameRepository.get_by_id", "GameRepository.update_board_and_status", "MoveRepository.create"], "published": ["board_to_list", "list_to_board", "compute_current_player", "detect_winner", "is_draw", "map_status_for_api", "map_winner_for_api", "create_new_game", "apply_move"], "classes": [], "methods": [{"name": "List[str] board_to_list(board: str)", "description": "Convert board string to list of 9 strings.", "scope": "", "scopeKind": ""}, {"name": "str list_to_board(cells: List[str])", "description": "Convert list of 9 strings to board string.", "scope": "", "scopeKind": ""}, {"name": "str compute_current_player(board: str)", "description": "Compute current player ('X' or 'O') based on the counts of marks on the board.", "scope": "", "scopeKind": ""}, {"name": "Optional[str] detect_winner(board: str)", "description": "Determine if there's a winner ('X' or 'O') on the board.", "scope": "", "scopeKind": ""}, {"name": "bool is_draw(board: str)", "description": "Check if the game board is a draw (full with no winner).", "scope": "", "scopeKind": ""}, {"name": "str map_status_for_api(status: GameStatus)", "description": "Map internal GameStatus enum to API string representation.", "scope": "", "scopeKind": ""}, {"name": "Optional[str] map_winner_for_api(status: GameStatus)", "description": "Return 'X' or 'O' if there's a winner, else None.", "scope": "", "scopeKind": ""}, {"name": "Game create_new_game(session: Session, player_x_id: Optional[int] = None, player_o_id: Optional[int] = None)", "description": "Initialize a new game with an empty board.", "scope": "", "scopeKind": ""}, {"name": "Tuple[Optional[Game],Optional[str]] apply_move(session: Session, game_id: int, position: int, player_id: Optional[int] = None)", "description": "Validate and apply a player's move, updating game state accordingly.", "scope": "", "scopeKind": ""}], "calls": ["GameRepository.create", "GameRepository.get_by_id", "GameRepository.update_board_and_status", "MoveRepository.create"], "search-terms": ["tic-tac-toe", "game logic", "board conversion", "winner detection", "move application", "game state", "repository", "API mapping"], "state": 2, "file_id": 8, "knowledge_revision": 20, "git_revision": "5c24b9ff2747466288d748197d5cb07ba179fd12", "ctags": [{"_type": "tag", "name": "WIN_LINES", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-226124-226079/tic_tac_toe_backend/src/api/game_service.py", "pattern": "/^WIN_LINES: Tuple[Tuple[int, int, int], ...] = ($/", "language": "Python", "typeref": "typename:Tuple[Tuple[int, int, int], ...]", "kind": "variable"}, {"_type": "tag", "name": "apply_move", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-226124-226079/tic_tac_toe_backend/src/api/game_service.py", "pattern": "/^def apply_move(session: Session, game_id: int, position: int, player_id: Optional[int] = None) -/", "language": "Python", "typeref": "typename:Tuple[Optional[Game],Optional[str]]", "kind": "function", "signature": "(session: Session, game_id: int, position: int, player_id: Optional[int] = None)"}, {"_type": "tag", "name": "board_to_list", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-226124-226079/tic_tac_toe_backend/src/api/game_service.py", "pattern": "/^def board_to_list(board: str) -> List[str]:$/", "language": "Python", "typeref": "typename:List[str]", "kind": "function", "signature": "(board: str)"}, {"_type": "tag", "name": "compute_current_player", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-226124-226079/tic_tac_toe_backend/src/api/game_service.py", "pattern": "/^def compute_current_player(board: str) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(board: str)"}, {"_type": "tag", "name": "create_new_game", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-226124-226079/tic_tac_toe_backend/src/api/game_service.py", "pattern": "/^def create_new_game(session: Session, player_x_id: Optional[int] = None, player_o_id: Optional[i/", "language": "Python", "typeref": "typename:Game", "kind": "function", "signature": "(session: Session, player_x_id: Optional[int] = None, player_o_id: Optional[int] = None)"}, {"_type": "tag", "name": "detect_winner", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-226124-226079/tic_tac_toe_backend/src/api/game_service.py", "pattern": "/^def detect_winner(board: str) -> Optional[str]:$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "function", "signature": "(board: str)"}, {"_type": "tag", "name": "is_draw", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-226124-226079/tic_tac_toe_backend/src/api/game_service.py", "pattern": "/^def is_draw(board: str) -> bool:$/", "language": "Python", "typeref": "typename:bool", "kind": "function", "signature": "(board: str)"}, {"_type": "tag", "name": "list_to_board", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-226124-226079/tic_tac_toe_backend/src/api/game_service.py", "pattern": "/^def list_to_board(cells: List[str]) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(cells: List[str])"}, {"_type": "tag", "name": "map_status_for_api", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-226124-226079/tic_tac_toe_backend/src/api/game_service.py", "pattern": "/^def map_status_for_api(status: GameStatus) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(status: GameStatus)"}, {"_type": "tag", "name": "map_winner_for_api", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-226124-226079/tic_tac_toe_backend/src/api/game_service.py", "pattern": "/^def map_winner_for_api(status: GameStatus) -> Optional[str]:$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "function", "signature": "(status: GameStatus)"}], "hash": "16869a6b2bf88c2d39f1f3c5f0e8086e", "format-version": 4, "code-base-name": "tic_tac_toe_backend", "filename": "tic_tac_toe_backend/src/api/game_service.py", "fields": [{"name": "Tuple[Tuple[int, int, int], ...] WIN_LINES", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"20": "5c24b9ff2747466288d748197d5cb07ba179fd12"}]}